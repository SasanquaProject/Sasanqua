import {
    VerticalBox,
    HorizontalBox
} from "std-widgets.slint";

import {
    Log,
    Progress,
    SingleSeparatorH,
    DoubleSeparatorV,
    FloatingButton
} from "./my-widgets/lib.slint";

import {
    ProjectPage,
    CorePage,
    CopPkgPage,
    ValidatePage,
    SynthesisPage,
    FPGAPage
} from "./pages/lib.slint";

export component MainWindow inherits Window {
    property <int> stat;

    preferred-width: 1280px;
    preferred-height: 800px;
    background: skyblue;

    // Progress
    Progress {
        y: 0;
        z: 0;
        height: 30px;
        background: root.background;

        stat: stat;
    }

    // Main View
    VerticalBox {
        z: 1;
        spacing: 0px;
        padding: 0px;

        // Page
        VerticalBox {
            height: 85%;
            spacing: 0px;
            padding: 8px;
            padding-top: 30px;

            if (stat == 0): ProjectPage {}
            if (stat == 1): CorePage {}
            if (stat == 2): CopPkgPage {}
            if (stat == 3): ValidatePage {}
            if (stat == 4): SynthesisPage {}
            if (stat == 5): FPGAPage {}
        }

        DoubleSeparatorV {
            separator-color: black;
        }

        // Status View
        HorizontalBox {
            spacing: 0px;
            padding: 0px;

            // Log Viewer
            Log {
                width: 60%;
                text: "[INFO] 00:00:00 (user) > hello";
            }

            SingleSeparatorH {
                separator-color: gray;
            }

            // Log Viewer
            Log {
                text: "[INFO] 00:00:00 (user) > hello";
            }
        }
    }

    // Controller
    FloatingButton {
        x: 15px;
        y: ((root.height * 85%) - self.height) / 2;
        z: 2;

        enabled: true;
        size: 30px;
        text: "＜";

        clicked => { stat = max(0, stat - 1); }
    }

    FloatingButton {
        x: root.width - self.width - 15px;
        y: ((root.height * 85%) - self.height) / 2;
        z: 2;

        enabled: true;
        size: 30px;
        text: "＞";

        clicked => { stat = min(5, stat + 1); }
    }
}
